<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER STOCK 2077 V3.1</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="matrix-rain"></div> <!-- 动态背景：矩阵雨 -->
    <header>
        <h1>CYBER STOCK 2077</h1>
        <div class="loading">LOADING DATA STREAM... SYSTEM INIT... NEURAL LINK ESTABLISHED</div>
    </header>

    <nav class="tabs">
        <button class="tab-btn active" onclick="switchTab('overview')">总览控制台</button>
        <button class="tab-btn" onclick="switchTab('ranking')">物资排行</button>
        <button class="tab-btn" onclick="switchTab('query')">深度查询</button>
    </nav>

    <main>
        <!-- 总览控制台 Tab -->
        <section id="overview" class="tab-content active">
            <div class="metrics-grid">
                <div class="metric-card">Total Stock: <span id="totalStock">0</span></div>
                <div class="metric-card">SKU Count: <span id="skuCount">0</span></div>
                <div class="metric-card">Categories: <span id="categories">0</span></div>
                <div class="metric-card">Critical Low: <span id="criticalLow">0</span></div>
            </div>
            <!-- 新增：低库存热力图看板 -->
            <div class="dashboard-card">
                <h3>低库存热力图 (Critical Heatmap)</h3>
                <canvas id="heatmapChart"></canvas>
            </div>
            <!-- 新增：库存趋势线图看板 -->
            <div class="dashboard-card">
                <h3>库存趋势 (Trend Line)</h3>
                <canvas id="trendChart"></canvas>
            </div>
            <!-- 实时日志 -->
            <div class="dashboard-card">
                <h3>REAL-TIME LOG MONITORING</h3>
                <div id="logMonitor">SYSTEM ONLINE...</div>
            </div>
        </section>

        <!-- 物资排行 Tab -->
        <section id="ranking" class="tab-content">
            <div class="dashboard-card">
                <h3>库存 Top 15 (Model + Spec)</h3>
                <table id="inventoryTable">
                    <thead><tr><th>ID</th><th>Model</th><th>Spec</th><th>Mat</th><th>Qty</th><th>Unit</th></tr></thead>
                    <tbody></tbody>
                </table>
                <button onclick="exportCSV()">导出报告 (Export CSV)</button>
            </div>
            <!-- 新增：3D库存堆叠图看板 -->
            <div class="dashboard-card">
                <h3>分类占比 (Category Stack - 3D)</h3>
                <canvas id="stackChart"></canvas>
            </div>
        </section>

        <!-- 深度查询 Tab -->
        <section id="query" class="tab-content">
            <input type="text" id="searchInput" placeholder="搜索 Model/Spec/Qty..." oninput="filterInventory()">
            <div id="queryResults"></div>
            <!-- 预测功能 -->
            <div class="dashboard-card">
                <h3>库存预测 (Prediction)</h3>
                <button onclick="predictStock()">生成预测</button>
                <div id="predictionOutput"></div>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
</body>
</html>
